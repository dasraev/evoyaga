{"version":3,"sources":["webpack:///./src/components/Icons/EditPen.vue","webpack:///./src/components/Icons/EditPen.vue?777f","webpack:///./src/components/Tables/TableWorkers.vue","webpack:///./src/components/Tables/TableWorkers.vue?3012","webpack:///./src/components/Tables/TableWorkersWrapper.vue","webpack:///./src/components/Tables/TableWorkersWrapper.vue?4822","webpack:///./src/services/workers.service.js","webpack:///./src/views/Workers.vue","webpack:///./src/views/Workers.vue?55be","webpack:///./src/composables/selectbox-list/useMarkazs.js","webpack:///./src/composables/selectbox-list/useCentersToRegions.js","webpack:///./src/composables/selectbox-list/usePostions.js","webpack:///./src/composables/useAlert.js"],"names":["xmlns","viewBox","fill","class","_createElementVNode","d","_hoisted_2","_hoisted_3","_createElementBlock","_hoisted_1","script","__exports__","render","deleteWorker","data","Swal","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","cancelButtonText","confirmButtonText","then","async","result","isConfirmed","http","delete","id","window","location","reload","editWorker","console","log","router","push","name","params","alertThisError","useErrorAlert","store","useStore","ROLE","isDirector","computed","getters","role","MANITORING_POSITION","NAVBATCHI_POSITION","updateWorkersList","toRefs","props","watch","value","getWorkersList","loading","ref","workersList","markazsList","useMarkazs","center","positionsList","usePositions","position","regionList","districtList","useCentersToRegions","markaz_tuman","currentPage","pageSize","allPagesCount","pageSizeOptions","useTableOptions","resp","fetchWorkersListHandler","results","num_pages","current","e","newPageSize","newCurrentPage","page","page_size","markaz","immediate","WorkersService","axios","get","selectedWorker","fetchPositions","InfoService","fetchMarkazs","region","onMounted","target","fetchRegion","useAlert","toast","useToast","alertIt","message","type"],"mappings":"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","file":"static/js/chunk-48125c25.6546b6c9.js","sourcesContent":["<template>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" class=\"w-5 h-5\">\n    <path d=\"m5.433 13.917 1.262-3.155A4 4 0 0 1 7.58 9.42l6.92-6.918a2.121 2.121 0 0 1 3 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 0 1-.65-.65Z\" />\n    <path d=\"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0 0 10 3H4.75A2.75 2.75 0 0 0 2 5.75v9.5A2.75 2.75 0 0 0 4.75 18h9.5A2.75 2.75 0 0 0 17 15.25V10a.75.75 0 0 0-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5Z\" />\n  </svg>\n</template>\n","import { render } from \"./EditPen.vue?vue&type=template&id=f8e5ce10\"\nconst script = {}\n\nimport exportComponent from \"/Users/abdumannontojiboev/Projects/work-projects/e-voya/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <table class=\"min-w-full table-auto text-sm xl:text-base\">\n    <thead>\n      <tr class=\"bg-white border-b border-gray-300 text-gray-400\">\n        <th class=\"w-20 py-4\">\n          №\n        </th>\n        <th class=\"py-4 pl-3\"></th>\n        <th class=\"text-left py-4 pl-3\">\n          F.I.Sh\n        </th>\n        <th class=\"py-4 pl-3\">\n          Tug’ilgan yili\n        </th>\n        <th class=\"py-4 pl-3\">\n          Lavozimi\n        </th>\n        <th class=\"py-4 pl-3\">\n          Markaz filiali\n        </th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr\n        v-for=\"(bodyItem, indx) in $props.tableBody\" :key=\"bodyItem.id\"\n        class=\"text-gray-800 odd:bg-white even:bg-grayPrimary rounded-3xl\"\n      >\n        <td class=\"w-20 py-4\">\n          <div class=\"text-center\">\n            {{ indx + 1 }}\n          </div>\n        </td>\n        <td>\n          <img :src=\"bodyItem.photo\" class=\"rounded-full h-10 w-10 object-cover\" alt=\"\">\n        </td>\n        <td class=\"py-4 overflow-hidden overflow-ellipsis\">\n          <div class=\"flex items-center\">\n            <!--            <router-link :to=\"`/workers/${bodyItem.id}`\">-->\n            <!--              {{ `${bodyItem.first_name}  ${bodyItem.last_name} ${bodyItem.father_name}` }}-->\n            {{ `${bodyItem.full_name}` }}\n            <!--            </router-link>-->\n          </div>\n        </td>\n        <td class=\"text-center px-3 py-4\">\n          <span v-if=\"bodyItem.birth_date\">\n            {{ bodyItem.birth_date }}\n          </span>\n        </td>\n        <td class=\"text-center px-3 py-4\">\n          <span v-if=\"bodyItem.position\">\n            {{ bodyItem.position }}\n          </span>\n        </td>\n        <td class=\"text-center px-3 py-4\">\n          <span v-if=\"bodyItem.markaz\">\n            {{ bodyItem.markaz }}\n          </span>\n        </td>\n        <td class=\"text-center px-3 py-4\">\n          <span v-if=\"bodyItem.markaz_tuman\">\n            {{ bodyItem.markaz_tuman }}\n          </span>\n        </td>\n        <td>\n          <div class=\"flex items-center gap-1 mx-auto\">\n            <button\n              class=\"px-2 flex gap-4 py-2 text-primary hover:text-white hover:bg-primary rounded-md\"\n              @click=\"editWorker(bodyItem)\"\n            >\n              <EditPen />\n            </button>\n            <button\n              class=\"px-2 flex gap-4 py-2 text-primary hover:text-white hover:bg-primary rounded-md\"\n              @click=\"deleteWorker(bodyItem)\"\n            >\n              <MdiDelete />\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script setup>\nimport { defineProps } from 'vue';\nimport MdiDelete from '../Icons/MdiDelete.vue'\nimport Swal from 'sweetalert2'\nimport http from '../../services/api/axios';\nimport EditPen from \"@/components/Icons/EditPen.vue\";\nimport router from \"@/router\";\ndefineProps({\n  tableBody: {\n    type: Array,\n    required: true,\n  },\n  viewFor: {\n    type: String,\n  },\n});\nfunction deleteWorker(data) {\n  Swal.fire({\n      title: \"Haqiqatdan ham o'chirishni istaysizmi?\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#DD6C6C\",\n      cancelButtonColor: \"#06B68C\",\n      cancelButtonText: \"Bekor qilish\",\n      confirmButtonText: \"Ha o'chiraman\",\n    }).then(async (result) => {\n      if (result.isConfirmed) {\n        http.delete('/auth/users/'+data.id + '/').then(()=> {\n          window.location.reload()\n        })\n      }\n    });\n}\nfunction editWorker (data) {\n  console.log(data)\n  router.push({\n    name: 'EditWorker',\n    params: {\n      id: data.id\n    }\n  })\n}\n</script>\n\n<style scoped></style>\n","import script from \"./TableWorkers.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TableWorkers.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <TableView v-model:current-page=\"currentPage\" v-model:page-size=\"pageSize\" :all-pages-count=\"allPagesCount\" :page-size-options=\"pageSizeOptions\" @table-options-changed=\"getWorkersList\">\n    <template #filter-additional-content>\n      <div class=\"w-full flex justify-between items-center\">\n        <div class=\"grid grid-cols-2 md:grid-cols-3 gap-4 2xl:w-[60%]\" v-if=\"!isDirector\">\n          <!-- <div class=\"form_wrapper my-3\">\n            <input v-validate-cyrillic v-model=\"full_name\" class=\"base_input\" placeholder=\"F.I.O qidirish\" type=\"text\" />\n          </div> -->\n          <div v-if=\"position !== MANITORING_POSITION\" class=\"form_wrapper my-3\">\n            <SelectBox id=\"center\" v-model=\"center\" class=\"w-full\" :options=\"markazsList\" show-by=\"name\" track-by=\"id\" placeholder=\"Markazni tanlang\" />\n          </div>\n          <div v-else class=\"form_wrapper my-3\">\n            <SelectBox\n              id=\"center\"\n              v-model=\"markaz_tuman\"\n              class=\"w-full\"\n              :options=\"addEmptyItemToSelectAllFilterOptions(districtList, 'name', 'id', 'Markaz - tuman tanlang')\"\n              show-by=\"name\"\n              track-by=\"id\"\n              placeholder=\"Markaz - tuman  tanlang\"\n            />\n          </div>\n          <div class=\"form_wrapper my-3\">\n            <SelectBox id=\"center\" v-model=\"position\" class=\"w-full\" :options=\"positionsList\" show-by=\"name\" track-by=\"code\" placeholder=\"Lavozimni tanlang\" />\n          </div>\n        </div>\n      </div>\n    </template>\n    <template #table-content>\n      <div>\n        <Loading v-if=\"loading\" v-model:active=\"loading\" :can-cancel=\"false\" :is-full-page=\"true\" color=\"#4785FE\" loader=\"dots\" />\n        <TableWorkers v-else :table-body=\"workersList\" :view-for=\"'minors'\" />\n      </div>\n    </template>\n  </TableView>\n</template>\n\n<script setup>\nimport {computed, defineEmits, defineProps, ref, toRefs, watch} from 'vue';\n// import useRegion from '../../composables/selectbox-list/useRegion';\nimport Loading from 'vue-loading-overlay';\nimport 'vue-loading-overlay/dist/vue-loading.css';\nimport SelectBox from '../Common/SelectBox';\nimport TableView from './TableView';\nimport TableWorkers from './TableWorkers';\nimport useTableOptions from '../../composables/useTableOptions';\nimport {addEmptyItemToSelectAllFilterOptions} from '../../utils/selectboxOptionsHelper';\nimport useErrorAlert from '../../composables/useErrorAlert';\nimport useMarkazs from '@/composables/selectbox-list/useMarkazs';\nimport usePositions from '../../composables/selectbox-list/usePostions';\nimport useCentersToRegions from '../../composables/selectbox-list/useCentersToRegions';\nimport { useStore } from 'vuex';\n\nconst {alertThisError} = useErrorAlert();\nconst store = useStore()\nconst emit = defineEmits(['update:selectedWorker', 'see', 'delete', 'edit']);\n\nconst ROLE = 'Direktor';\n\nconst isDirector = computed(() => store.getters['getUserInfo'].role === ROLE);\n\nconst MANITORING_POSITION = 4;\nconst NAVBATCHI_POSITION = 3;\n\nconst props = defineProps({\n  fetchWorkersListHandler: {\n    type: Function,\n  },\n  selectedWorker: {\n    type: Object,\n  },\n  updateWorkersList: {\n    type: Boolean,\n    default: true,\n  },\n});\nconst {updateWorkersList} = toRefs(props);\n\nwatch(\n  () => updateWorkersList.value,\n  (updateWorkersList) => {\n    if (updateWorkersList) {\n      getWorkersList();\n    }\n  }\n);\n\nconst loading = ref(true);\n\n// function emitWrapper(emitName,data){\n//   emit(emitName,data)\n// }\nconst workersList = ref([]);\n\nconst {markazsList} = useMarkazs();\nconst center = ref(null);\nconst {positionsList} = usePositions();\nconst position = ref(null);\nconst {regionList: districtList} = useCentersToRegions();\nconst markaz_tuman = ref(null);\nwatch(\n  () => positionsList.value,\n  () => {\n    position.value = NAVBATCHI_POSITION;\n  }\n);\n\nconst {currentPage, pageSize, allPagesCount, pageSizeOptions} = useTableOptions([5, 7, 10]);\n\nconst getWorkersList = async (params) => {\n  try {\n    loading.value = true;\n    const resp = await props.fetchWorkersListHandler({\n      ...params,\n    });\n    workersList.value = resp?.results;\n    console.log(workersList.value);\n    allPagesCount.value = resp?.num_pages;\n    currentPage.value = resp?.current;\n    loading.value = false;\n  } catch (e) {\n    alertThisError(e);\n  }\n};\n\nwatch(\n  [pageSize, currentPage, center, position, markaz_tuman],\n  async ([newPageSize, newCurrentPage, center, position, markaz_tuman]) => {\n    await getWorkersList({\n      page: newCurrentPage,\n      page_size: newPageSize,\n      markaz: center,\n      [position === MANITORING_POSITION ? 'markaz_tuman' : '']: markaz_tuman,\n      position: position,\n    });\n  },\n  {\n    immediate: true,\n  }\n);\n</script>\n\n<style scoped></style>\n","import script from \"./TableWorkersWrapper.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TableWorkersWrapper.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import axios from \"./api/axios\";\n\nconst WorkersService = {\n    async getWorkersList (params = {}){\n        try {\n            return (\n                await axios.get(\"/auth/users\", {\n                    params: {\n                        ...params,\n                    },\n                })\n            ).data;\n        } catch (e) {\n            console.log(e)\n        }\n    }\n}\nexport default WorkersService\n","<template>\n  <div class=\"bg-white rounded-md overflow-hidden\">\n    <div class=\"flex items-center justify-between py-[8px] px-[24px]\">\n      <PageTitle> Xodimlar ro`yxati </PageTitle>\n      <div class=\"flex items-center gap-6\">\n        <!-- <router-link to=\"/addWorkerToMonitoring\" class=\"bg-primary text-white px-[12px] py-[6px] rounded-md\">\n          <span>Monitoring xodimi qo'shish </span>\n        </router-link> -->\n        <router-link to=\"/select-worker-position\" class=\"bg-primary text-white px-[12px] py-[6px] rounded-md\">\n          <span> Xodim qo'shish </span>\n        </router-link>\n      </div>\n    </div>\n    <TableWorkersWrapper v-model=\"selectedWorker\" :update-workers-list=\"updateWorkersList\" :fetch-workers-list-handler=\"getWorkersList\" @delete=\"deleteWorker\" />\n  </div>\n</template>\n\n<script setup>\nimport {ref} from 'vue';\nimport TableWorkersWrapper from '../components/Tables/TableWorkersWrapper';\nimport WorkersService from '../services/workers.service';\nimport PageTitle from '../components/LayoutItems/PageTitle';\n// import {useStore} from 'vuex';\n\n// const store = useStore();\n// const ROLE = 'Direktor';\n\n// const isDirector = computed(() => store.getters['getUserInfo'].role === ROLE);\n\nconst updateWorkersList = ref(false);\nconst selectedWorker = ref(null);\n\nconst {getWorkersList} = WorkersService;\n</script>\n<style scoped></style>\n","import script from \"./Workers.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Workers.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import {onMounted, ref} from 'vue';\nimport InfoService from '../../services/info.service';\n\nexport default function useMarkazs() {\n  const markazsList = ref([]);\n  const fetchPositions = async () => {\n    const {data} = await InfoService.fetchMarkazs();\n    markazsList.value = [\n      {\n        id: '',\n        region: 'Toshkent shahri',\n        name: 'Markazni tanlang',\n      },\n      ...data,\n    ];\n  };\n  onMounted(async () => {\n    await fetchPositions();\n  });\n\n  return {\n    markazsList,\n  };\n}\n","import {onMounted, ref} from 'vue';\nimport InfoService from '../../services/info.service';\n\nexport default function useCentersToRegions() {\n  const regionList = ref([]);\n  const fetchPositions = async (e) => {\n    console.log(e);\n    let id = null;\n    if (e?.target?.value) {\n      id = e.target.value;\n    }\n    const {data} = await InfoService.fetchRegion(id);\n    regionList.value = [...data];\n  };\n  onMounted(async () => {\n    await fetchPositions();\n  });\n\n  return {\n    regionList,\n    fetchPositions,\n  };\n}\n","import { onMounted, ref } from \"vue\";\nimport InfoService from \"../../services/info.service\";\n\nexport default function usePositions() {\n  const positionsList = ref([]);\n  const fetchPositions = async () => {\n    const { data } = await InfoService.fetchPositions();\n    positionsList.value = data;\n  };\n  onMounted(async () => {\n    await fetchPositions();\n  });\n\n  return {\n    positionsList,\n  };\n}\n","import {useToast} from 'vue-toastification';\n\nexport default function useAlert() {\n  const toast = useToast();\n\n  function alertIt(message, type = ['success', 'error', 'danger', 'info'][0]) {\n    toast(message, {\n      type: type,\n    });\n  }\n\n  return {\n    alertIt,\n  };\n}\n"],"sourceRoot":""}